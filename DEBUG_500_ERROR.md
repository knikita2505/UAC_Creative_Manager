# –û—Ç–ª–∞–¥–∫–∞ –æ—à–∏–±–∫–∏ 500 Internal Server Error

## üîç –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

#### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```python
üîß –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∏–¥–µ–æ...
üìÅ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞...
‚úÖ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: /path/to/file
üîß –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (–æ—á–∏—Å—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è)...
‚úÖ –í–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: /path/to/processed
üìê –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –≤–∏–¥–µ–æ...
‚úÖ –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ: square
```

#### 2. –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫
```python
‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ:
   –¢–∏–ø –æ—à–∏–±–∫–∏: ValueError
   –°–æ–æ–±—â–µ–Ω–∏–µ: Invalid file format
   –°—Ç–µ–∫—Ç—Ä–µ–π—Å:
   Traceback (most recent call last):
     File "main.py", line 123, in upload_video
       ...
```

## üß™ –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É:

### –®–∞–≥ 1: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å–Ω–æ–≤–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ

### –®–∞–≥ 2: –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ backend
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω backend –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:
```bash
cd backend
source venv/bin/activate
python main.py

# –ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –≤—ã–≤–æ–¥–æ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ
```

### –®–∞–≥ 3: –ù–∞–π–¥–∏—Ç–µ –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
–õ–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç –Ω–∞ –∫–∞–∫–æ–º –∏–º–µ–Ω–Ω–æ —ç—Ç–∞–ø–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞:
- ‚ùå –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
- ‚ùå –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∏–¥–µ–æ (ffmpeg)
- ‚ùå –ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ùå –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- ‚ùå –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –º–∏–Ω–∏–∞—Ç—é—Ä
- ‚ùå –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ YouTube

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ 500:

### 1. ffmpeg –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∏–¥–µ–æ –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
ffmpeg -version
ffprobe -version

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (macOS)
brew install ffmpeg

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Ubuntu/Debian)
sudo apt-get install ffmpeg
```

### 2. YouTube API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞ YouTube
**–†–µ—à–µ–Ω–∏–µ:** –°–º. `YOUTUBE_INTEGRATION_GUIDE.md`

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É uploads
ls -la backend/uploads/

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
mkdir -p backend/uploads/{processed,formats,thumbnails}
chmod 755 backend/uploads/
```

### 4. –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ "–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞"
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MP4, AVI, MOV, MKV –∏–ª–∏ WebM

### 5. –ü—Ä–æ–±–ª–µ–º–∞ —Å PIL/Pillow
**–°–∏–º–ø—Ç–æ–º:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –º–∏–Ω–∏–∞—Ç—é—Ä —Å –º–æ–¥–∞–ª–∫–æ–π
**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install --upgrade Pillow
```

## üìä –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤:

```
üîç DEBUG: –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É
   campaign_name: –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è
   video_source: local
   thumbnail_option: first_frame
   modal_image_id: None
   video_file: test.mp4
   video_file.content_type: video/mp4

üîß –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–∏–¥–µ–æ...
üìÅ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞...
‚úÖ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: /path/to/uploads/abc123_test.mp4

üîß –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (–æ—á–∏—Å—Ç–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è)...
üîß –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ: /path/to/uploads/abc123_test.mp4
‚úÖ –í–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: /path/to/uploads/processed/abc123_processed.mp4

üìê –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –≤–∏–¥–µ–æ...
üìê –†–∞–∑–º–µ—Ä—ã –≤–∏–¥–µ–æ: 1080x1080
‚úÖ –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ: square

üé¨ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–ª—è square –≤–∏–¥–µ–æ: ['vertical', 'horizontal']
   üîß –°–æ–∑–¥–∞–Ω–∏–µ vertical —Ñ–æ—Ä–º–∞—Ç–∞ (720x1280)...
   ‚úÖ Vertical —Ñ–æ—Ä–º–∞—Ç —Å–æ–∑–¥–∞–Ω: /path/to/formats/abc123_vertical.mp4
   üîß –°–æ–∑–¥–∞–Ω–∏–µ horizontal —Ñ–æ—Ä–º–∞—Ç–∞ (1280x720)...
   ‚úÖ Horizontal —Ñ–æ—Ä–º–∞—Ç —Å–æ–∑–¥–∞–Ω: /path/to/formats/abc123_horizontal.mp4

üì§ –ó–∞–≥—Ä—É–∑–∫–∞: –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ 21.10.2025
üñºÔ∏è –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞: /path/to/processed/abc123_processed.mp4
‚úÖ –ü–µ—Ä–≤—ã–π –∫–∞–¥—Ä –∏–∑–≤–ª–µ—á–µ–Ω: /path/to/thumbnails/thumb123.jpg
‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –Ω–∞ YouTube: https://youtube.com/watch?v=...

INFO:     127.0.0.1:58831 - "POST /upload/video HTTP/1.1" 200 OK
```

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ª–æ–≥ –æ—à–∏–±–∫–∏** –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ backend
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ —ç—Ç–∞–ø –ø–∞–¥–∞–µ—Ç** (—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π ‚úÖ –ø–µ—Ä–µ–¥ ‚ùå)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```bash
   ffmpeg -version
   ffprobe -version
   pip list | grep -i pillow
   ```
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   ls -la backend/uploads/
   df -h  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
   ```

## üìù –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å, –≤–∫–ª—é—á–∏—Ç–µ –≤ –æ—Ç—á–µ—Ç:
1. –ü–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤ —Å ‚ùå –æ—à–∏–±–∫–æ–π
2. –í–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `ffmpeg -version`, `python --version`
3. –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –û–°
4. –¢–∏–ø –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (—Ñ–æ—Ä–º–∞—Ç, —Ä–∞–∑–º–µ—Ä)
5. –í–∫–ª—é—á–µ–Ω–∞ –ª–∏ –æ–ø—Ü–∏—è "–°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã"

---

**–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å–Ω–æ–≤–∞!** üîç

